# SoftDeck 사용법

## 소개

SoftDeck는 Windows용 커스텀 버튼 덱 앱입니다. Stream Deck처럼 격자형 버튼 패널을 제공하며, 앱 실행 / 핫키 전송 / 텍스트 입력 / 미디어 제어 / 시스템 모니터링 / URL 열기 / 폴더 열기 / 셸 명령 실행 / 매크로 등을 버튼 하나로 수행할 수 있습니다. 버튼은 무한 중첩 가능한 폴더 트리로 정리됩니다.

두 가지 입력 모드를 지원합니다:

- **Shortcut Mode** (기본) — Num Lock OFF 시 창 표시 + 넘패드로 버튼 조작, Num Lock ON 시 창 숨김 + 넘패드 일반 사용
- **Widget Mode** — 항상 표시되는 마우스 전용 위젯 (넘패드/NumLock 연동 없음)

---

## 설치 및 실행

### SoftDeck.bat (권장 — 설치 불필요)

`SoftDeck.bat`를 더블클릭하면 됩니다.

- 첫 실행 시: Python 3.13.2 임베디드 배포판 + pip + 의존성을 `python/` 폴더에 자동 다운로드·설치 후 실행
- 이후 실행: 셋업을 건너뛰고 바로 실행

Python이나 패키지를 직접 설치할 필요가 없습니다.

### 소스에서 직접 실행

시스템에 Python이 설치되어 있는 경우:

```bash
pip install -r requirements.txt
python main.py
```

### 빌드 (exe)

```bash
build.bat
```

빌드 완료 시 `dist/SoftDeck.exe` 생성

---

## 입력 모드

Settings에서 언제든 전환할 수 있으며, 재시작 없이 즉시 적용됩니다.

### Shortcut Mode (기본)

넘패드 키로 버튼을 조작하는 모드입니다.

- Num Lock OFF → 창 표시, 넘패드 키가 버튼에 매핑
- Num Lock ON → 창 숨김, 넘패드 키는 일반 숫자 입력
- 전용 키보드 훅(DLL)이 넘패드 키를 가로채서 다른 앱에 전달되지 않도록 합니다

### Widget Mode

마우스 전용 위젯 모드입니다.

- 창이 항상 표시됩니다
- 넘패드 키 캡처 없음 (키보드 훅 비활성)
- 넘패드가 없는 환경에서 사용하기 좋습니다

---

## 기본 조작

### 넘패드 키 매핑 (Shortcut Mode, Num Lock OFF)

넘패드 키가 4×3 버튼 그리드에 1:1 대응됩니다.

```
┌───────┬───────┬───────┐
│ Num 7 │ Num 8 │ Num 9 │  ← 1행
├───────┼───────┼───────┤
│ Num 4 │ Num 5 │ Num 6 │  ← 2행
├───────┼───────┼───────┤
│ Num 1 │ Num 2 │ Num 3 │  ← 3행
├───────┴───────┼───────┤
│    Num 0      │ Num . │  ← 4행
└───────────────┴───────┘
```

- **Num 0** (넓은 버튼) — 기본: 상위 폴더로 이동 (Navigate Parent)
- **Num .** — 기본: 이전 폴더로 돌아가기 (Navigate Back)

4행의 Num 0은 물리적 넘패드처럼 2칸 너비로 표시됩니다.

### Num Lock에 따른 동작 (Shortcut Mode)

| Num Lock | 넘패드 키 | 창 상태 |
|----------|-----------|---------|
| OFF | 버튼 덱 조작 | 창 표시 |
| ON | 일반 숫자 입력 | 창 숨김 |

---

## 창 조작

### 타이틀 바

| 요소 | 설명 |
|------|------|
| **☰ 버튼** | 좌측 폴더 트리 패널 표시/숨기기 |
| **폴더명** | 현재 폴더 이름 (중앙 표시) |
| **투명도 슬라이더** | 창 투명도 조절 (20%~100%) |
| **▼ 버튼** | 트레이로 최소화 |
| **우클릭** | Settings / Export Config / Import Config |

### 창 이동 및 크기 조절

- **이동**: 타이틀 바를 드래그
- **크기 조절**: 창 가장자리를 드래그 (8방향)
- 창 위치는 이동할 때마다 자동 저장됩니다

### 시스템 트레이

트레이 아이콘 우클릭 메뉴:

- **Show** — 창 표시
- **Settings** — 설정 열기
- **Reset Position** — 창 위치 초기화 (주 모니터 중앙 상단)
- **Quit** — 앱 종료

> 창의 X 버튼(닫기)은 종료가 아닌 트레이 최소화입니다.

### 포커스 동작

- 버튼 클릭 시 다른 앱의 포커스를 빼앗지 않습니다 (WS_EX_NOACTIVATE)
- 앱 실행 시 자동으로 실행된 앱에 포커스를 전달합니다
- 핫키/텍스트 입력/매크로 실행 시, 폴더에 매핑된 앱이 있으면 해당 앱을 자동 포커스한 후 실행합니다

---

## 버튼 설정

### 버튼 편집

버튼을 **우클릭** 하면 메뉴가 나타납니다:

- **Edit Button** — 버튼 편집 다이얼로그 열기
- **Clear Button** — 버튼 초기화
- **Copy Button** — 버튼 설정 복사
- **Paste Button** — 복사한 설정 붙여넣기

### 버튼 드래그 앤 드롭

버튼을 **좌클릭 드래그**하여 다른 버튼과 위치를 교환할 수 있습니다.

- 비어있는 버튼 자리에 드롭하면 이동
- 다른 버튼 위에 드롭하면 서로 위치 교환
- 비어있는 버튼은 드래그할 수 없습니다

### 버튼 에디터 옵션

| 항목 | 설명 |
|------|------|
| **Label** | 버튼에 표시할 텍스트 (비우면 액션 기본 텍스트 표시) |
| **Icon** | 아이콘 이미지 (png/jpg/svg/ico). 아이콘 위에 라벨이 겹쳐 표시됨 |
| **Label Color** | 라벨 글씨 색상 (hex, 예: `#ff0000`) |
| **Font Size** | 라벨 글씨 크기 (0 = 기본 설정값 사용) |

> 텍스트가 버튼 폭을 초과하면 자동으로 마키 스크롤됩니다.

### 앱 찾기 기능

Launch App 편집 시 두 가지 방법으로 앱을 선택할 수 있습니다:

- **Browse...** — 파일 탐색기에서 실행 파일 직접 선택
- **Find App...** — 현재 실행 중인 프로세스 또는 시작 메뉴 바로가기에서 선택

Find App 선택 시 경로, 작업 디렉터리, 아이콘이 자동으로 채워집니다.

### 액션 타입

| 타입 | 설명 | 주요 파라미터 |
|------|------|---------------|
| **Launch App** | 프로그램 실행 | 경로, 인자, 작업 디렉터리 |
| **Hotkey** | 키보드 단축키 전송 | 키 조합 (예: `ctrl+c`) |
| **Text Input** | 텍스트 입력 | 텍스트, 클립보드 모드 |
| **Open URL** | 웹사이트 열기 | URL (예: `https://google.com`) |
| **Open Folder** | 폴더를 탐색기에서 열기 | 경로 (`%USERPROFILE%`, `~` 지원) |
| **Run Command** | 셸 명령 실행 | 명령어 |
| **Macro** | 여러 동작 순차 실행 | 단계별 편집 또는 녹화 |
| **System Monitor** | CPU/RAM 사용률 표시 | (실시간 자동 업데이트) |
| **Navigate Folder** | 특정 폴더로 이동 | 대상 폴더 선택 |
| **Navigate Parent** | 상위 폴더로 이동 | (파라미터 없음) |
| **Navigate Back** | 이전에 방문한 폴더로 되돌아가기 | (파라미터 없음) |
| **Plugin: Media Control** | 미디어/볼륨/마이크 제어 | 커맨드 선택 |

#### Navigate Parent vs Navigate Back

- **Navigate Parent** — 폴더 트리에서 현재 폴더의 부모로 이동
- **Navigate Back** — 방문 기록 스택에서 이전 폴더로 되돌아가기 (최대 50개 기록). 기록이 없으면 상위 폴더로 이동

비루트 폴더에서 (3,0) 위치가 비어있으면 Navigate Parent가 자동 배치됩니다. 모든 폴더에서 (3,2) 위치가 비어있으면 Navigate Back이 자동 배치됩니다.

#### Media Control 커맨드

| 커맨드 | 기능 |
|--------|------|
| Play / Pause | 재생/일시정지 토글 |
| Next Track | 다음 곡 |
| Previous Track | 이전 곡 |
| Stop | 정지 |
| Volume Up | 볼륨 업 |
| Volume Down | 볼륨 다운 |
| Mute / Unmute | 음소거 토글 |
| Mic Mute | 마이크 음소거 토글 |
| Now Playing | 현재 재생 중인 곡 표시 (클릭 시 재생/일시정지) |
| Audio Device Switch | 오디오 출력 장치 순환 전환 |

**토글 버튼 상태 아이콘:** Play/Pause, Mute, Mic Mute 버튼은 현재 상태에 따라 아이콘과 라벨이 자동 전환됩니다. 버튼 편집에서 각 상태별 아이콘과 라벨을 개별 설정할 수 있습니다.

#### Macro 사용법

여러 동작을 순서대로 실행합니다.

**8가지 단계 종류:**

| 단계 | 설명 |
|------|------|
| **Hotkey** | 키 조합 전송 |
| **Text Input** | 텍스트 입력 (클립보드 모드 지원) |
| **Delay** | 대기 시간 (ms) |
| **Key Down** | 키 누르기 (유지) |
| **Key Up** | 키 떼기 |
| **Mouse Down** | 마우스 버튼 누르기 (좌표 지정) |
| **Mouse Up** | 마우스 버튼 떼기 (좌표 지정) |
| **Mouse Scroll** | 마우스 스크롤 (좌표 + 방향) |

단계 추가 후 ▲▼ 버튼으로 순서 변경 가능

**매크로 녹화:**

Record 버튼을 누르면 키보드와 마우스 입력을 자동 녹화합니다.

- **F9** — 녹화 중지 (녹화된 단계 저장)
- **Escape** — 녹화 취소 (폐기)
- 동작 사이의 지연 시간이 자동으로 기록됩니다
- 녹화 중 이벤트 수와 경과 시간이 표시됩니다

---

## 폴더 관리

버튼들을 폴더 단위로 정리할 수 있습니다. 폴더는 무한 중첩 가능합니다.

### 폴더 트리 (좌측 패널)

- **클릭** — 해당 폴더의 버튼 표시
- **드래그 앤 드롭** — 폴더 순서/위치 변경
- **우클릭** 메뉴:
  - New Sub-Folder — 하위 폴더 생성
  - Rename — 이름 변경
  - Edit (Mapped Apps) — 자동 전환용 앱 매핑
  - Export Folder — 폴더를 JSON으로 내보내기
  - Import Folder — JSON에서 하위 폴더 가져오기
  - Move Up / Move Down — 같은 레벨에서 순서 변경
  - Delete — 폴더 삭제

### 폴더 내보내기 / 가져오기

개별 폴더를 JSON 파일로 내보내고 가져올 수 있습니다.

- **Export Folder** — 폴더와 모든 하위 폴더·버튼을 JSON으로 저장 (아이콘 파일도 base64로 포함)
- **Import Folder** — JSON 파일에서 하위 폴더로 가져오기 (아이콘 자동 복원, ID 자동 재생성으로 중복 방지)

### 자동 폴더 전환

폴더에 앱을 매핑하면, 해당 앱이 포커스될 때 자동으로 해당 폴더로 전환됩니다.

1. 폴더 우클릭 → **Edit (Mapped Apps)**
2. 연결할 앱 프로세스 이름 추가 (예: `chrome.exe`)
   - **Find App...** 버튼으로 실행 중인 프로세스에서 선택 가능
3. Settings에서 **Auto-switch folders based on active app** 활성화

매핑된 앱이 포커스 상태일 때 핫키/텍스트 입력/매크로 실행 시 해당 앱에 자동 포커스됩니다.

### 예제 폴더

첫 실행 시 또는 버전 업그레이드 시, 예제 폴더가 자동으로 추가됩니다:

- **Media** — 미디어 컨트롤 (재생/정지/볼륨/음소거/마이크/Now Playing/장치 전환)
- **폴더** — 자주 쓰는 폴더 바로 열기 (사진/문서/다운로드/바탕화면)
- **가상 데스크톱** — Windows 가상 데스크톱 단축키 (전환/생성/닫기/작업 보기)

동일한 이름의 폴더가 이미 있으면 중복 추가되지 않습니다.

---

## 설정 (Settings)

타이틀 바 우클릭 → Settings 또는 트레이 아이콘 → Settings

### Grid Layout

| 항목 | 설명 | 기본값 |
|------|------|--------|
| **Button Size** | 버튼 크기 | 100px |
| **Button Spacing** | 버튼 간격 | 8px |
| **Default Font** | 기본 라벨 폰트 | 시스템 기본 |
| **Default Font Size** | 기본 라벨 크기 | 10px |

### Behavior

| 항목 | 설명 | 기본값 |
|------|------|--------|
| **Input Mode** | Shortcut Mode / Widget Mode 전환 | Shortcut Mode |
| **Auto-switch** | 활성 앱 기반 폴더 자동 전환 | ON |
| **Always on top** | 항상 위에 표시 | ON |

### Appearance

| 항목 | 설명 | 기본값 |
|------|------|--------|
| **Theme** | 테마 선택 (10종) | Dark |
| **Opacity** | 창 투명도 | 100% |

**사용 가능한 테마:** Dark, Light, Solarized Light, Midnight, Emerald, Violet, Nord, Dracula, Amber, Cyber

---

## 설정 내보내기 / 가져오기

타이틀 바 우클릭:

- **Export Config** — 전체 설정을 JSON 파일로 저장 (아이콘 포함)
- **Import Config** — JSON 파일에서 전체 설정 불러오기 (기존 설정 덮어쓰기)

설정 파일 위치: `%APPDATA%/SoftDeck/config.json`

---

## 기본 매핑 구성

### Root (메인)

```
┌────────┬────────┬────────┐
│ VOL -  │  MUTE  │ VOL +  │  Num 7/8/9
├────────┼────────┼────────┤
│  PREV  │  PLAY  │  NEXT  │  Num 4/5/6
├────────┼────────┼────────┤
│  CPU   │  RAM   │ Apps → │  Num 1/2/3
├────────┴────────┼────────┤
│     Back        │        │  Num 0 / .
└─────────────────┴────────┘
```

### Apps 폴더

```
┌────────────┬────────────┬────────────┐
│ Calculator │  Notepad   │  Explorer  │
├────────────┼────────────┼────────────┤
│  Task Mgr  │    Snip    │    CMD     │
├────────────┼────────────┼────────────┤
│Shortcuts → │  YouTube   │   Google   │
├────────────┴────────────┼────────────┤
│        ← Back           │            │
└─────────────────────────┴────────────┘
```

### Shortcuts 폴더

```
┌────────────┬────────────┬────────────┐
│    Copy    │   Paste    │    Undo    │
├────────────┼────────────┼────────────┤
│    Cut     │ Select All │    Redo    │
├────────────┼────────────┼────────────┤
│    Save    │ Screenshot │  Lock PC   │
├────────────┴────────────┼────────────┤
│        ← Back           │            │
└─────────────────────────┴────────────┘
```

> 비루트 폴더에서는 Num 0 위치에 "Back" (상위 폴더 이동)이 자동 배치됩니다.
> Num . 위치에는 "Navigate Back" (방문 기록 뒤로가기)이 자동 배치됩니다.

---

## 게임 중 사용

| 게임 모드 | 키보드 조작 | 창 표시 |
|-----------|-------------|---------|
| 보더리스 창모드 | O | O |
| 전체화면 (Exclusive) | O | X |

보더리스 창모드에서 완벽 동작합니다. 전체화면에서는 넘패드/핫키만 동작하고 창은 보이지 않습니다.

---

## 팁

- Widget Mode를 사용하면 넘패드 없이도 마우스만으로 조작 가능합니다
- 버튼 클릭 시 다른 앱의 포커스를 빼앗지 않습니다
- 다이얼로그(설정/편집) 열림 중에는 넘패드가 일반 숫자 입력으로 동작합니다
- 버튼 Copy/Paste로 같은 설정을 여러 위치에 빠르게 복제할 수 있습니다
- 버튼 드래그 앤 드롭으로 위치를 쉽게 교환할 수 있습니다
- 폴더별 Export/Import로 버튼 구성을 다른 설정 파일과 공유할 수 있습니다
- 매크로 녹화(Record)로 복잡한 마우스+키보드 조작을 간편하게 기록할 수 있습니다
- 토스트 알림이 화면 우하단에 표시되어 앱 상태를 알려줍니다
